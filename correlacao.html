<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G6 - Estatística</title>
    <link rel="icon" href="img/icone2.png">
    <link rel="stylesheet" href="css/menu.css">
    <link rel="stylesheet" href="css/correlacao.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script type="text/javascript" src="./script/papaparse.min.js"></script>
</head>

<body>
    <header>
        <div class="inner-width">
            <a href="home.html" class="logo"><img src="img/logo-final.png" alt=""></a>
            <i class="menu-toggle-btn fas fa-bars"></i>
            <nav class="navigation-menu">
                <a href="descritiva.html"><i class="fas fa-chart-bar home"></i></i> Descritiva</a>
                <a href="probabilidade.html"><i class="fas fa-align-left about"></i> Probabilidade</a>
                <a href="correlacao.html"><i class="fab fa-buffer works"></i> Correlação</a>
                <a href="sobre.html"><i class="fas fa-users team"></i> Sobre nós</a>
                <a href="index.html"><i class="fas fa-sign-out-alt sair"></i> Sair</a>
            </nav>
        </div>
    </header>


    <script type="text/javascript">
        $(".menu-toggle-btn").click(function () {
            $(this).toggleClass("fa-times");
            $(".navigation-menu").toggleClass("active");
        });
    </script>

    <div class="titulo">
        <h1>CORRELAÇÃO E REGRESSÃO</h1>
    </div>
    <div class="formulario">
        <form>
            <h3>Selecione arquivo .CSV com valores para análise ou insira os valores manualmente:</h3>
            <div class="div-upload">
                <label>Envio de arquivo:</label>
            </div>
            <div class="div-upload">
                <div class="am">
                    <label for="upload-csv">Selecionar um arquivo</label>
                    <input type="file" id="upload-csv" accept=".csv" >
                </div>
                <div class="pop">
                    <label>                        
                        <ul id="side-menu">
                            <li>
                                <i id="btn-upload-csv" class="fas fa-file-import"></i>
                            </li>
                            <li>
                                <div class="side-menu__label">Enviar arquivo</div>
                            </li>
                        </ul>
                    </label>
                </div>
            </div>
            <div>
                <label>Valores de X:</label><br><input class="dados" id="valorX" type="text"
                    placeholder="Digite os valores de X separados por ';'. Exemplo: 1;2;3;4">
            </div>
            <br>
            <div>
                <label>Valores de Y:</label><br><input class="dados" id="valorY" type="text"
                    placeholder="Digite os valores de Y separados por ';'. Exemplo: 1;2;3;4" />
            </div>
            
            <div id="botao">
                <input class="botao" id="button" type="button" value="CALCULAR" onmouseclick="botaoClique">
                <input class="botao" type="button" value="LIMPAR DADOS" onclick="botaoApagar()">
            </div>
        </form>
    </div>
    
    <div id="tabela">
        <table id="tabelasvariaveis"></table>
    </div>

    <div id="calculo_correlação" class="esconder"></div>
    <!-- Div Gráfico -->
    <div id="grafico">
        <div id="graficoCorrelacao" class="correlacao"></div>
    </div>
    <!-- Div botão 'rolar para cima' -->
    <a href="#" id="to-top" class="to-top">
        <i class="fas fa-chevron-up"></i>
    </a>

    <script>
        let btn_upload = document.getElementById('btn-upload-csv').addEventListener('click', () => {
            Papa.parse(document.getElementById('upload-csv').files[0], {
                download: true,
                header: true,
                complete: function(results) {
                    console.log(results)  
                    results.data.map((data, index) => {
                        let dadosx = document.getElementById("valorX")
                        gerarDadosX(dadosx, data)
                        let dadosy = document.getElementById("valorY")
                        gerarDadosY(dadosy, data)
                    })
                }
            })
        })
        function gerarDadosX(dados, data) {
            let cont = 0
            for(let i in data) {
                cont++
                if (cont == 1) {
                    dados.value += data[i] + ';' 
                }                
            }
        }
        function gerarDadosY(dados, data) {
            let cont = 0
            for(let i in data) {
                cont++
                if (cont == 2) {
                    dados.value += data[i] + ';' 
                }                
            }
        }
    </script>
    <script src="./script/correlacao.js"></script>

</body>

</html>